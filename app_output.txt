
Looking for credential config at: C:\Users\ASUS\Desktop\Nouveau dossier (2)\Panor-viewer\dist\win-unpacked\resources\app\data\credential-config.json
App is ready, creating window...
Creating window...
Starting server...
=== ServerManager.start() called ===
Platform: win32
Architecture: x64
Node version: v18.17.1
User data path: C:\Users\ASUS\AppData\Roaming\pano-app
Process resourcesPath: C:\Users\ASUS\Desktop\Nouveau dossier (2)\Panor-viewer\dist\win-unpacked\resources
__dirname: C:\Users\ASUS\Desktop\Nouveau dossier (2)\Panor-viewer\dist\win-unpacked\resources\app\desktop
Projects directory verified: C:\Users\ASUS\AppData\Roaming\pano-app\projects
Finding available port...
Selected port: 3456
Fetching credentials...
=== Starting credential resolution ===
No cached credentials found, fetching from Vercel server...
Attempting to fetch credentials (attempt 1/4)
Successfully fetched credentials from server
Successfully fetched and cached new credentials
Credentials obtained successfully
Starting server with fetched credentials...
ASAR packaging detected: false
Running in packaged mode
Using non-ASAR packaged paths
Checking possible server paths: [
  'C:\\Users\\ASUS\\Desktop\\Nouveau dossier (2)\\Panor-viewer\\dist\\win-unpacked\\resources\\server-production.js',
  'C:\\Users\\ASUS\\Desktop\\Nouveau dossier (2)\\Panor-viewer\\dist\\win-unpacked\\resources\\scripts\\server-production.js',
  'C:\\Users\\ASUS\\Desktop\\Nouveau dossier (2)\\Panor-viewer\\dist\\win-unpacked\\resources\\app\\scripts\\server-production.js',
  'C:\\Users\\ASUS\\Desktop\\Nouveau dossier (2)\\Panor-viewer\\dist\\win-unpacked\\resources\\standalone\\scripts\\server-production.js'
]
  Checking: C:\Users\ASUS\Desktop\Nouveau dossier (2)\Panor-viewer\dist\win-unpacked\resources\server-production.js - exists: false
  Checking: C:\Users\ASUS\Desktop\Nouveau dossier (2)\Panor-viewer\dist\win-unpacked\resources\scripts\server-production.js - exists: false
  Checking: C:\Users\ASUS\Desktop\Nouveau dossier (2)\Panor-viewer\dist\win-unpacked\resources\app\scripts\server-production.js - exists: true
  Checking: C:\Users\ASUS\Desktop\Nouveau dossier (2)\Panor-viewer\dist\win-unpacked\resources\standalone\scripts\server-production.js - exists: false
Checking possible standalone paths: [
  'C:\\Users\\ASUS\\Desktop\\Nouveau dossier (2)\\Panor-viewer\\dist\\win-unpacked\\resources\\standalone',
  'C:\\Users\\ASUS\\Desktop\\Nouveau dossier (2)\\Panor-viewer\\dist\\win-unpacked\\resources\\app\\.next\\standalone',
  'C:\\Users\\ASUS\\Desktop\\Nouveau dossier (2)\\Panor-viewer\\dist\\win-unpacked\\resources\\.next\\standalone'
]
  Checking: C:\Users\ASUS\Desktop\Nouveau dossier (2)\Panor-viewer\dist\win-unpacked\resources\standalone - exists: false
  Checking: C:\Users\ASUS\Desktop\Nouveau dossier (2)\Panor-viewer\dist\win-unpacked\resources\app\.next\standalone - exists: true
  Checking: C:\Users\ASUS\Desktop\Nouveau dossier (2)\Panor-viewer\dist\win-unpacked\resources\.next\standalone - exists: false
Resolved server path: C:\Users\ASUS\Desktop\Nouveau dossier (2)\Panor-viewer\dist\win-unpacked\resources\app\scripts\server-production.js
Server path exists: true
Resolved working directory: C:\Users\ASUS\Desktop\Nouveau dossier (2)\Panor-viewer\dist\win-unpacked\resources\app\.next\standalone
Working directory exists: true
Default Node.js executable: C:\Users\ASUS\Desktop\Nouveau dossier (2)\Panor-viewer\dist\win-unpacked\Advanced Panorama Viewer.exe
Looking for bundled Node.js executable: node.exe
Checking bundled Node.js path: C:\Users\ASUS\Desktop\Nouveau dossier (2)\Panor-viewer\dist\win-unpacked\resources\node\node.exe
Bundled Node.js exists: true
Using bundled Node.js runtime: C:\Users\ASUS\Desktop\Nouveau dossier (2)\Panor-viewer\dist\win-unpacked\resources\node\node.exe
Bundled Node.js file stats: { size: 70768280, isFile: true, mode: '100666' }
Final server configuration:
  Server path: C:\Users\ASUS\Desktop\Nouveau dossier (2)\Panor-viewer\dist\win-unpacked\resources\app\scripts\server-production.js
  Working directory: C:\Users\ASUS\Desktop\Nouveau dossier (2)\Panor-viewer\dist\win-unpacked\resources\app\.next\standalone
  Node executable: C:\Users\ASUS\Desktop\Nouveau dossier (2)\Panor-viewer\dist\win-unpacked\resources\node\node.exe
  Platform: win32
  Port: 3456
Environment variables set:
  NEXT_PUBLIC_SUPABASE_URL: [SET]
  NEXT_PUBLIC_SUPABASE_ANON_KEY: [SET]
  SUPABASE_SERVICE_ROLE_KEY: [SET]
  PORT: 3456
Attempting to spawn server process...
  Command: C:\Users\ASUS\Desktop\Nouveau dossier (2)\Panor-viewer\dist\win-unpacked\resources\node\node.exe
  Args: [
  'C:\\Users\\ASUS\\Desktop\\Nouveau dossier (2)\\Panor-viewer\\dist\\win-unpacked\\resources\\app\\scripts\\server-production.js'
]
  Working directory: C:\Users\ASUS\Desktop\Nouveau dossier (2)\Panor-viewer\dist\win-unpacked\resources\app\.next\standalone
Server process spawned successfully with PID: 20892
Server process spawn event fired - process started successfully
Server stdout: > Starting production server on port 3456

Server stdout: > Projects path: C:\Users\ASUS\AppData\Roaming\pano-app\projects
> Standalone path: C:\Users\ASUS\Desktop\Nouveau dossier (2)\Panor-viewer\dist\win-unpacked\resources\app\.next\standalone
> ASAR mode: false

Checking server readiness (attempt 1)...
Server check failed: connect ECONNREFUSED 127.0.0.1:3456
Checking server readiness (attempt 2)...
Server check failed: connect ECONNREFUSED 127.0.0.1:3456
Server stdout:   ▲ Next.js 14.2.30
  - Local:        http://localhost:3456
  - Network:      http://0.0.0.0:3456

 ✓ Starting...

Checking server readiness (attempt 3)...
Server stdout:  ✓ Ready in 1951ms

Server is responding to /api/hello
Server is ready
Server running at: http://127.0.0.1:3456
Using server URL: http://127.0.0.1:3456
Loading URL: http://127.0.0.1:3456
Server stdout: getUserProfile result: {
  userId: 'fda277b7-0a44-495b-90a1-722adb14eb6b',
  data: {
    id: 'fda277b7-0a44-495b-90a1-722adb14eb6b',
    email: 'simo0brk@gmail.com',
    role: 'admin',
    approved: true,
    created_at: '2025-08-07T11:22:59.614449+00:00',
    updated_at: '2025-08-07T11:22:59.614449+00:00'
  },
  error: null
}

Server stdout: Bypassing authentication for test route: /api/projects

Server stdout: getUserProfile result: {
  userId: 'fda277b7-0a44-495b-90a1-722adb14eb6b',
  data: {
    id: 'fda277b7-0a44-495b-90a1-722adb14eb6b',
    email: 'simo0brk@gmail.com',
    role: 'admin',
    approved: true,
    created_at: '2025-08-07T11:22:59.614449+00:00',
    updated_at: '2025-08-07T11:22:59.614449+00:00'
  },
  error: null
}

Server stdout: Fetching users with type: all

Server stdout: Fetching users with type: pending

Server stdout: getUserProfile result: {
  userId: 'fda277b7-0a44-495b-90a1-722adb14eb6b',
  data: {
    id: 'fda277b7-0a44-495b-90a1-722adb14eb6b',
    email: 'simo0brk@gmail.com',
    role: 'admin',
    approved: true,
    created_at: '2025-08-07T11:22:59.614449+00:00',
    updated_at: '2025-08-07T11:22:59.614449+00:00'
  },
  error: null
}

Server stdout: Pending users fetched: 0 users
Returning users data: { users: [] }

Server stdout: Fetching users with type: pending

Server stdout: All users fetched: 7 users

Server stdout: Returning users data: {
  users: [
    {
      id: 'a37fb96d-516c-46fb-91c4-2c4382a8559b',
      email: 'sales-manager@primezone.co',
      role: 'user',
      approved: true
    },
    {
      id: '00624481-255c-4d88-9c12-95fb1d09e503',
      email: 'a@gmail.com',
      role: 'user',
      approved: true
    },
    {
      id: 'fda277b7-0a44-495b-90a1-722adb14eb6b',
      email: 'simo0brk@gmail.com',
      role: 'admin',
      approved: true
    },
    {
      id: 'ce67004c-0316-4664-8292-d13647d1e0e0',
      email: 'admin@test.com',
      role: 'user',
      approved: true
    },
    {
      id: '550dac95-3ad3-4f41-8c14-7dd4704d5c6d',
      email: 'zraib.med@gmail.com',
      role: 'admin',
      approved: true
    },
    {
      id: 'bb50eb06-8f4c-4136-a4e1-d12d1eb44281',
      email: 'lafrik.brahim@gmail.com',
      role: 'user',
      approved: true
    },
    {
      id: '46b6d663-478e-4844-b455-a75f9e120741',
      email: 'brahim.lafrik@gmail.com',
      role: 'admin',
      approved: true
    }
  ]
}

Server stdout: Fetching users with type: all

Server stdout: All users fetched: 7 users

Server stdout: Returning users data: {
  users: [
    {
      id: 'a37fb96d-516c-46fb-91c4-2c4382a8559b',
      email: 'sales-manager@primezone.co',
      role: 'user',
      approved: true
    },
    {
      id: '00624481-255c-4d88-9c12-95fb1d09e503',
      email: 'a@gmail.com',
      role: 'user',
      approved: true
    },
    {
      id: 'fda277b7-0a44-495b-90a1-722adb14eb6b',
      email: 'simo0brk@gmail.com',
      role: 'admin',
      approved: true
    },
    {
      id: 'ce67004c-0316-4664-8292-d13647d1e0e0',
      email: 'admin@test.com',
      role: 'user',
      approved: true
    },
    {
      id: '550dac95-3ad3-4f41-8c14-7dd4704d5c6d',
      email: 'zraib.med@gmail.com',
      role: 'admin',
      approved: true
    },
    {
      id: 'bb50eb06-8f4c-4136-a4e1-d12d1eb44281',
      email: 'lafrik.brahim@gmail.com',
      role: 'user',
      approved: true
    },
    {
      id: '46b6d663-478e-4844-b455-a75f9e120741',
      email: 'brahim.lafrik@gmail.com',
      role: 'admin',
      approved: true
    }
  ]
}

Server stdout: Pending users fetched: 0 users
Returning users data: { users: [] }

